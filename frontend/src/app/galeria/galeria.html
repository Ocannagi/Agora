<app-mostrar-errores [errores]="storeVenta.errors()"></app-mostrar-errores>

<div class="galeria-wrapper">
  @if (isLoading()) {
    <app-cargando/>
  } @else {
    <div class="grid">
      @for (it of items(); track trackById(it.aavId, it)) {
        <mat-card
          class="card clickable"
          tabindex="0"
          role="link"
          aria-label="Ver {{ it.antiguedad.antNombre }}"
          (click)="openDetalle(it)"
          (keyup.enter)="openDetalle(it)"
          (keyup.space)="openDetalle(it)">
          <div class="media">
            @if (portadaUrl(it)) {
              <img
                ngSrc="{{ portadaUrl(it)! }}"
                width="480"
                height="320"
                alt="Imagen de {{ it.antiguedad.antNombre }}"
                priority />
            } @else {
              <div class="media-placeholder" aria-hidden="true"></div>
            }
          </div>
          <mat-card-header>
            <mat-card-title>{{ it.antiguedad.antNombre }}</mat-card-title>
            <mat-card-subtitle>{{ it.antiguedad.subcategoria.scatDescripcion }} Â· {{ it.antiguedad.periodo.perDescripcion }}</mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <div class="precio">{{ it.aavPrecioVenta | currency:'ARS':'symbol':'1.0-2':'es-AR' }}</div>
            <div class="meta">Publicado: {{ it.aavFechaPublicacion }}</div>
          </mat-card-content>
        </mat-card>
      }
    </div>

    <mat-paginator
      [length]="total()"
      [pageIndex]="pageIndex()"
      [pageSize]="pageSize()"
      [pageSizeOptions]="[5, 10, 20]"
      (page)="onPage($event)">
    </mat-paginator>
  }
</div>

<app-mostrar-errores [errores]="storeVenta.errors()"></app-mostrar-errores>

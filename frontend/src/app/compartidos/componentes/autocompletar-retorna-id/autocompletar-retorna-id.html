<app-mostrar-errores [errores]="store.errors()"></app-mostrar-errores>
<form (submit)="$event.preventDefault()">
    <mat-form-field appearance="fill">
        <mat-label>{{label()}}</mat-label>
        <input #SearchBox type="text" placeholder="{{placeholder()}}" matInput [formControl]="control"
            [matAutocomplete]="auto"
            #autoTrigger="matAutocompleteTrigger"
            (input)="store.setKeyword(SearchBox.value)" 
            (click)="store.noHayRegistros() && store.hayKeyword() ? store.resetKeyword() : null; store.setUsuarioInteractuo(true)" 
            (blur)="onBlur()"/>
        <mat-error>{{obtenerErrorCampo(label())}}</mat-error>
        <mat-autocomplete requireSelection="true" autoActiveFirstOption autoSelectActiveOption #auto
                  [displayWith]="displayText"
                  (optionSelected)="reenlazarInput($event.option.value);">
        @if(!store.hayError()) {
            @for (registro of store.resourceAll.value(); track $index) {
            <mat-option [value]="registro">
                {{registro.descripcion}}
            </mat-option>
            }
        }    
        </mat-autocomplete>

    </mat-form-field>
</form>